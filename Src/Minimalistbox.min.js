/** Minimalistbox - V.0.1 - Ilker Guller **/
(function(b,h){function f(a,e){this.element=a;this.$el=b(this.element);this.settings=b.extend({},g,e);this._defaults=g;this._name=d;this.init()}var d="Minimalistbox",g={};f.prototype={init:function(){this.createHtml()},isInternetExplorer:function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a},createHtml:function(){var a=b("<div></div>"),e=b("<div><ul></ul></div>"),c=b("<div><span></span></div>"),d=this;this.$el.attr("class")&&a.addClass(this.$el.attr("class"));this.$el.addClass(this._name+"-hiddenselect");a.addClass(this._name+"-main");this.$el.attr("name")&&a.addClass(this._name+"-"+this.$el.attr("name"));this.$el.attr("id")&&a.addClass(this._name+"-"+this.$el.attr("id"));e.addClass(this._name+"-items");var f=e.find("ul");this.$el.find("option").each(function(){var a=b("<li></li>");a.addClass(d._name+"-item");a.text(b(this).text());a.data("value",b(this).val());f.append(a)});c.addClass(this._name+"-result");a.append(c);a.append(e);this.$el.after(a);this.$el.appendTo(a);this.$parent=a;this.changeSelectedItem();this.addEvents()},addEvents:function(){var a=this;this.$parent.on("click","."+a._name+"-item",function(){a.onItemSelected(b(this))});this.$parent.on("click","."+a._name+"-result",function(){a.$parent.toggleClass(a._name+"-active")})},onItemSelected:function(a){var b=this.$parent.find("."+this._name+"-items"),c=this.$el;b.find("."+this._name+"-selected").removeClass(this._name+"-selected"); a.addClass(this._name+"-selected");c.find("option[value='"+a.data("value")+"']").prop("selected",!0);this.changeSelectedItem(a.text());this.$parent.toggleClass(this._name+"-active")},changeSelectedItem:function(a){var b=this.$el,c=this.$parent.find("."+this._name+"-result");a?c.find("span").text(a):0<b.find("option:selected").length?c.find("span").text(b.find("option:selected").text()):c.find("span").text(b.find("option:eq(0)").text())}};b.fn[d]=function(a){return this.each(function(){b.data(this,"plugin_"+d)||b.data(this,"plugin_"+d,new f(this,a))})}})(jQuery);